<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading System Tutorial &mdash; AlphaPy 2.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/dark.css?v=70edf1c7" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=3c4615cf"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/dark_mode_js/default_dark.js?v=fd565c74"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AlphaPy" href="../user_guide/pipelines.html" />
    <link rel="prev" title="NCAA Basketball Tutorial" href="ncaab.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AlphaPy
          </a>
              <div class="version">
                2.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/command.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kaggle.html">Kaggle Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="market.html">Market Prediction Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncaab.html">NCAA Basketball Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Trading System Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/pipelines.html">AlphaPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/project.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/market_flow.html">MarketFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sport_flow.html">SportFlow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">alphapy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AlphaPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Trading System Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/system.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="trading-system-tutorial">
<h1>Trading System Tutorial<a class="headerlink" href="#trading-system-tutorial" title="Link to this heading"></a></h1>
<p><em>MarketFlow Running Time: Approximately 1 minute</em></p>
<a class="reference internal image-reference" href="../_images/returns.png"><img alt="Cumulative Returns" class="align-center" src="../_images/returns.png" style="width: 75%;" /></a>
<p>A trading system is a set of automated rules for buying and selling
stocks, options, futures, and other instruments. Trading is considered
to be both an art and a science; the scientific branch is known as
<em>technical analysis</em>. Many technicians spend their lives chasing the
Holy Grail: a system that will make them rich simply by detecting
common patterns. Technicians in history such as Edwards, Elliott,
Fibonacci, Gann, and Gartley show us visually appealing charts,
but there is no scientific evidence proving that these techniques
actually work.</p>
<p>Trading systems generally operate in two contexts: trend and
counter-trend. A system that follows the trend tries to stay in
one direction as long as possible. A system that bucks the trend
reverses direction at certain support and resistance levels, also
known as fading the trend. With MarketFlow, you can implement
either type of system using our long/short strategy.</p>
<p>In this tutorial, we are going to test a simple long/short system.
If today’s closing price is greater than yesterday’s close, then
we go long. If today’s close is lower than yesterday’s, then we
go short, so we always have a position in the market.</p>
<p><strong>Step 1</strong>: From the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory, change your directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="s2">&quot;Trading System&quot;</span>
</pre></div>
</div>
<p>Before running MarketFlow, let’s review the <code class="docutils literal notranslate"><span class="pre">market.yml</span></code> file
in the <code class="docutils literal notranslate"><span class="pre">config</span></code> directory. Since we are just running a system,
we really don’t need the <code class="docutils literal notranslate"><span class="pre">model.yml</span></code> file, but if you have a
project where the system is derived from a model, then you will
want to maintain both files.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">market.yml</span></code>, we will test our system on five stocks in the
target group <code class="docutils literal notranslate"><span class="pre">faang</span></code>, going back 1000 trading days. We need
to define only two features: <code class="docutils literal notranslate"><span class="pre">hc</span></code> for higher close, and <code class="docutils literal notranslate"><span class="pre">lc</span></code>
for lower close. We name the system <code class="docutils literal notranslate"><span class="pre">closer</span></code>, which requires
just a <code class="docutils literal notranslate"><span class="pre">longentry</span></code> and a <code class="docutils literal notranslate"><span class="pre">shortentry</span></code>. There are no exit
conditions and no holding period, so we will always have a position
in each stock.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><strong>market.yml</strong></span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">market</span><span class="p">:</span>
<span class="w">    </span><span class="nt">create_model    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">data_fractal    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1d</span>
<span class="w">    </span><span class="nt">data_history    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">    </span><span class="nt">forecast_period </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">fractal         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1d</span>
<span class="w">    </span><span class="nt">lag_period      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">leaders         </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">predict_history </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">    </span><span class="nt">schema          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quandl_wiki</span>
<span class="w">    </span><span class="nt">subject         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stock</span>
<span class="w">    </span><span class="nt">target_group    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">faang</span>

<span class="nt">system</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;closer&#39;</span>
<span class="w">    </span><span class="nt">holdperiod </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">longentry  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hc</span>
<span class="w">    </span><span class="nt">longexit   </span><span class="p">:</span>
<span class="w">    </span><span class="nt">shortentry </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lc</span>
<span class="w">    </span><span class="nt">shortexit  </span><span class="p">:</span>
<span class="w">    </span><span class="nt">scale      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="nt">groups</span><span class="p">:</span>
<span class="w">    </span><span class="nt">faang      </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;fb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;aapl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amzn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nflx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;googl&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">features       </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;hc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lc&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">aliases</span><span class="p">:</span>
<span class="w">    </span><span class="nt">hc         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;higher_close&#39;</span>
<span class="w">    </span><span class="nt">lc         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lower_close&#39;</span>
</pre></div>
</div>
</div>
<p><strong>Step 2</strong>: Now, let’s run MarketFlow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mflow</span>
</pre></div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">mflow</span></code> runs, you will see the progress of the workflow,
and the logging output is saved in <code class="docutils literal notranslate"><span class="pre">market_flow.log</span></code>. When the
workflow completes, your project structure will look like this,
with an additional directory <code class="docutils literal notranslate"><span class="pre">systems</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Trading System
├── market_flow.log
├── config
    ├── algos.yml
    ├── market.yml
    ├── model.yml
└── data
└── input
└── model
└── output
└── plots
└── systems
    ├── faang_closer_positions_1d.csv
    ├── faang_closer_returns_1d.csv
    ├── faang_closer_trades_1d.csv
    ├── faang_closer_transactions_1d.csv
</pre></div>
</div>
<p>MarketFlow records position, return, and transaction data in the
<code class="docutils literal notranslate"><span class="pre">systems</span></code> directory, so now we can analyze our results with
<em>Pyfolio</em>.</p>
<p><strong>Step 3</strong>: From the command line, enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
<p><strong>Step 4</strong>: Click on the notebook named:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="n">Trading</span> <span class="n">System</span><span class="o">.</span><span class="n">ipynb</span>
</pre></div>
</div>
<p>You should obtain the following results in your notebook.</p>
<a class="reference internal image-reference" href="../_images/pyfolio.png"><img alt="Pyfolio Tear Sheet" class="align-center" src="../_images/pyfolio.png" style="width: 100%;" /></a>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ncaab.html" class="btn btn-neutral float-left" title="NCAA Basketball Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../user_guide/pipelines.html" class="btn btn-neutral float-right" title="AlphaPy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ScottFree Analytics LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
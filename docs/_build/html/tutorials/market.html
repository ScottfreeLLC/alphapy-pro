<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Market Prediction Tutorial &mdash; AlphaPy 2.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/dark.css?v=70edf1c7" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=3c4615cf"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/dark_mode_js/default_dark.js?v=fd565c74"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NCAA Basketball Tutorial" href="ncaab.html" />
    <link rel="prev" title="Kaggle Tutorial" href="kaggle.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AlphaPy
          </a>
              <div class="version">
                2.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/command.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kaggle.html">Kaggle Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Market Prediction Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncaab.html">NCAA Basketball Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="system.html">Trading System Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/pipelines.html">AlphaPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/project.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/market_flow.html">MarketFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/sport_flow.html">SportFlow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/modules.html">alphapy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AlphaPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Market Prediction Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/market.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="market-prediction-tutorial">
<h1>Market Prediction Tutorial<a class="headerlink" href="#market-prediction-tutorial" title="Link to this heading"></a></h1>
<p><em>MarketFlow Running Time: Approximately 6 minutes</em></p>
<a class="reference internal image-reference" href="../_images/amzn.png"><img alt="Amazon Candlestick Chart" class="align-center" src="../_images/amzn.png" style="width: 80%;" /></a>
<p>Machine learning subsumes <em>technical analysis</em> because collectively,
technical analysis is just a set of features for market prediction.
We can use machine learning as a feature blender for moving averages,
indicators such as RSI and ADX, and even representations of chart
formations such as double tops and head-and-shoulder patterns.</p>
<p>We are not directly predicting net return in our models, although
that is the ultimate goal. By characterizing the market with models,
we can increase the Return On Investment (ROI). We have a wide range
of dependent or target variables from which to choose, not just net
return. There is more power in building a classifier rather than a
more traditional regression model, so we want to define binary
conditions such as whether or not today is going to be a trend day,
rather than a numerical prediction of today’s return.</p>
<p>In this tutorial, we will train a model that predicts whether or
not the next day will have a larger-than-average range. This is
important for deciding which system to deploy on the prediction
day. If our model gives us predictive power, then we can filter
out those days where trading a given system is a losing strategy.</p>
<p><strong>Step 1</strong>: From the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory, change your
directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="s2">&quot;Trading Model&quot;</span>
</pre></div>
</div>
<p>Before running MarketFlow, let’s briefly review the configuration
files in the <code class="docutils literal notranslate"><span class="pre">config</span></code> directory:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">market.yml</span></code>:</dt><dd><p>The MarketFlow configuration file</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">model.yml</span></code>:</dt><dd><p>The AlphaPy configuration file</p>
</dd>
</dl>
<p>In <code class="docutils literal notranslate"><span class="pre">market.yml</span></code>, we limit our model to six stocks in the target
group <code class="docutils literal notranslate"><span class="pre">test</span></code>, going back 2000 trading days. You can define any
group of stock symbols in the <code class="docutils literal notranslate"><span class="pre">groups</span></code> section, and then set
the <code class="docutils literal notranslate"><span class="pre">target_group</span></code> attribute in the <code class="docutils literal notranslate"><span class="pre">market</span></code> section to the
name of that group.</p>
<p>This is a 1-day forecast, but we also use those features that can
be calculated at the market open, such as gap information in the
<code class="docutils literal notranslate"><span class="pre">leaders</span></code> section. In the <code class="docutils literal notranslate"><span class="pre">features</span></code> section, we define many
variables for moving averages, historical range, RSI, volatility,
and volume.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><strong>market.yml</strong></span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">market</span><span class="p">:</span>
<span class="w">    </span><span class="nt">create_model    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">data_fractal    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1d</span>
<span class="w">    </span><span class="nt">data_history    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">    </span><span class="nt">forecast_period </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">fractal         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1d</span>
<span class="w">    </span><span class="nt">lag_period      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">leaders         </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;gap&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapbadown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapbaup&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapdown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapup&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">predict_history </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">schema          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yahoo</span>
<span class="w">    </span><span class="nt">subject         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stock</span>
<span class="w">    </span><span class="nt">target_group    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>

<span class="nt">groups</span><span class="p">:</span>
<span class="w">    </span><span class="nt">all  </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;aaoi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;aapl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;acia&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;adbe&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;adi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;adp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;agn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;aig&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;akam&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;algn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;alk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;alxn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amat&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amba&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amgn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amzn&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;antm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;arch&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;asml&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;athn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;atvi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;auph&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;avgo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;axp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ayx&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;azo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ba&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;baba&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bac&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bby&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bidu&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;biib&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;brcd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bvsn&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;bwld&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;c&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cacc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cara&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;casy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cat&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cde&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;celg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cern&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;chkp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;chtr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;clvs&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cme&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cmg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cof&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cohr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;comm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cost&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;cpk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;crm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;crus&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;csco&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ctsh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ctxs&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;csx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cvs&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;cybr&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;data&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ddd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;deck&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dgaz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dia&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dis&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dish&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dnkn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dpz&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;drys&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dust&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ea&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ebay&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;edc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;edz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;eem&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;elli&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;eog&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;esrx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;etrm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ewh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ewt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;expe&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fang&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fas&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;faz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fb&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;fcx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fdx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ffiv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;five&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fnsr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fslr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ftnt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gddy&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;gdx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gdxj&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ge&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gild&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gld&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;glw&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;googl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gpro&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;grub&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gs&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gwph&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hal&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;has&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hdp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hlf&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hog&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hum&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;ibb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ibm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ice&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;idxx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ilmn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ilmn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;incy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;intc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;intu&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;ip&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;isrg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;iwm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ivv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;iwf&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;iwm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jack&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jcp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jdst&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jnj&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;jnpr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jnug&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jpm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;kite&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;klac&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ko&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;kss&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;labd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;labu&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;len&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lite&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lmt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lnkd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lrcx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lulu&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lvs&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mbly&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mcd&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;mchp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mdy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;meoh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mnst&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;momo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mon&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mrk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ms&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;msft&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;mtb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mu&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nflx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nfx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nke&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ntap&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ntes&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ntnx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nugt&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;nvda&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nxpi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nxst&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;oii&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;oled&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;orcl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;orly&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;p&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;panw&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;pcln&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pnra&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;prgo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pxd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pypl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;qcom&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;qqq&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;qrvo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rht&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sam&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sbux&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sds&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sgen&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;shld&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;shop&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sig&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;sina&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;siri&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;skx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;slb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;slv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;smh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;snap&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sncr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;soda&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;splk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;spy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;stld&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;stmp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;stx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;svxy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;swks&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;symc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;t&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;tbt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;teva&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tgt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tho&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tlt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tmo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tna&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tqqq&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;trip&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;tsla&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ttwo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tvix&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;twlo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;twtr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tza&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uaa&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ugaz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uhs&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;ulta&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ulti&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;unh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;unp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;upro&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uri&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ups&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uri&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uthr&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;utx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;uvxy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;v&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;veev&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;viav&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vlo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vmc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vrsn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vrtx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vrx&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;vwo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vxx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wday&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wdc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wfc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wfm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wmt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wynn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;x&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;xbi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xhb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xiv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xle&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlf&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlnx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xom&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlu&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;xlv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xme&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xom&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wix&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;yelp&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;z&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">etf  </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;dia&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;dust&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;edc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;edz&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;eem&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ewh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ewt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fas&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;faz&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;gld&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hyg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;iwm&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ivv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;iwf&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;jnk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mdy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nugt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;qqq&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;sds&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;smh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;spy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tbt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tlt&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tna&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tvix&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tza&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;upro&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;uvxy&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vwo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vxx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xhb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xiv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xle&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlf&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlk&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlp&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;xlu&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xlv&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;xme&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">tech </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;aapl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;adbe&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amat&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amgn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amzn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;avgo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;baba&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bidu&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;brcd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;csco&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ddd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;emc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;expe&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fslr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;goog&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;intc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;isrg&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lnkd&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;msft&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nflx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nvda&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pcln&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;qcom&#39;</span><span class="p p-Indicator">,</span>
<span class="w">            </span><span class="s">&#39;qqq&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tsla&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;twtr&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">test </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;aapl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;amzn&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;goog&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;fb&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nvda&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tsla&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">features</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;abovema_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;abovema_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;abovema_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;abovema_20&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;abovema_50&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;adx&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;atr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bigdown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;bigup&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;diminus&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;diplus&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;doji&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;gap&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapbadown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapbaup&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapdown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;gapup&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;hc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ho&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hl&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lc&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;ll&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;lo&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hookdown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;hookup&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;inside&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;outside&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_10&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;madelta_12&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_15&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_18&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta_20&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;madelta&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;net&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;netdown&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;netup&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_8&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;nr_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;nr_18&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi_2&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;roi_10&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;roi_20&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_1_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_1_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_1_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_2_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_2_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_2_10&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;rr_3_8&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_3_14&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_4_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_4_20&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_5_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_5_20&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;rr_5_30&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_6_14&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_6_25&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_7_14&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_7_35&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rr_8_22&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;rrhigh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rrlow&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rrover&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rrunder&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_5&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;rsi_6&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_8&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rsi_14&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_3_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_5_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_8_8&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;sep_10_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_14_14&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_21_21&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_30_30&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;sep_40_40&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;sephigh&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;seplow&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;trend&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vma&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vmover&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vmratio&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vmunder&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;volatility_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;volatility_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;volatility&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;volatility_20&#39;</span><span class="p p-Indicator">,</span>
<span class="w">           </span><span class="s">&#39;wr_2&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr_6&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;wr_10&#39;</span><span class="p p-Indicator">]</span>

<span class="nt">aliases</span><span class="p">:</span>
<span class="w">    </span><span class="nt">atr        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ma_truerange&#39;</span>
<span class="w">    </span><span class="nt">aver       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ma_hlrange&#39;</span>
<span class="w">    </span><span class="nt">cma        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ma_close&#39;</span>
<span class="w">    </span><span class="nt">cmax       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;highest_close&#39;</span>
<span class="w">    </span><span class="nt">cmin       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lowest_close&#39;</span>
<span class="w">    </span><span class="nt">hc         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;higher_close&#39;</span>
<span class="w">    </span><span class="nt">hh         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;higher_high&#39;</span>
<span class="w">    </span><span class="nt">hl         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;higher_low&#39;</span>
<span class="w">    </span><span class="nt">ho         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;higher_open&#39;</span>
<span class="w">    </span><span class="nt">hmax       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;highest_high&#39;</span>
<span class="w">    </span><span class="nt">hmin       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lowest_high&#39;</span>
<span class="w">    </span><span class="nt">lc         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lower_close&#39;</span>
<span class="w">    </span><span class="nt">lh         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lower_high&#39;</span>
<span class="w">    </span><span class="nt">ll         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lower_low&#39;</span>
<span class="w">    </span><span class="nt">lo         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lower_open&#39;</span>
<span class="w">    </span><span class="nt">lmax       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;highest_low&#39;</span>
<span class="w">    </span><span class="nt">lmin       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lowest_low&#39;</span>
<span class="w">    </span><span class="nt">net        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;net_close&#39;</span>
<span class="w">    </span><span class="nt">netdown    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;down_net&#39;</span>
<span class="w">    </span><span class="nt">netup      </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;up_net&#39;</span>
<span class="w">    </span><span class="nt">omax       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;highest_open&#39;</span>
<span class="w">    </span><span class="nt">omin       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lowest_open&#39;</span>
<span class="w">    </span><span class="nt">rmax       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;highest_hlrange&#39;</span>
<span class="w">    </span><span class="nt">rmin       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;lowest_hlrange&#39;</span>
<span class="w">    </span><span class="nt">rr         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;maratio_hlrange&#39;</span>
<span class="w">    </span><span class="nt">rixc       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rindex_close_high_low&#39;</span>
<span class="w">    </span><span class="nt">rixo       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rindex_open_high_low&#39;</span>
<span class="w">    </span><span class="nt">roi        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;netreturn_close&#39;</span>
<span class="w">    </span><span class="nt">rsi        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rsi_close&#39;</span>
<span class="w">    </span><span class="nt">sepma      </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ma_sep&#39;</span>
<span class="w">    </span><span class="nt">vma        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ma_volume&#39;</span>
<span class="w">    </span><span class="nt">vmratio    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;maratio_volume&#39;</span>
<span class="w">    </span><span class="nt">upmove     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;net_high&#39;</span>

<span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">abovema    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;close</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">cma_50&#39;</span>
<span class="w">    </span><span class="nt">belowma    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;close</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">cma_50&#39;</span>
<span class="w">    </span><span class="nt">bigup      </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rrover</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">sephigh</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">netup&#39;</span>
<span class="w">    </span><span class="nt">bigdown    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rrover</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">sephigh</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">netdown&#39;</span>
<span class="w">    </span><span class="nt">doji       </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sepdoji</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">rrunder&#39;</span>
<span class="w">    </span><span class="nt">hookdown   </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;open</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">high[1]</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">close</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">close[1]&#39;</span>
<span class="w">    </span><span class="nt">hookup     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;open</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">low[1]</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">close</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">close[1]&#39;</span>
<span class="w">    </span><span class="nt">inside     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;low</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">low[1]</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">high</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">high[1]&#39;</span>
<span class="w">    </span><span class="nt">madelta    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;(close</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">cma_50)</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">atr_10&#39;</span>
<span class="w">    </span><span class="nt">nr         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;hlrange</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">rmin_4&#39;</span>
<span class="w">    </span><span class="nt">outside    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;low</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">low[1]</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">high</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">high[1]&#39;</span>
<span class="w">    </span><span class="nt">roihigh    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;roi_5</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">5&#39;</span>
<span class="w">    </span><span class="nt">roilow     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;roi_5</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">-5&#39;</span>
<span class="w">    </span><span class="nt">roiminus   </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;roi_5</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">0&#39;</span>
<span class="w">    </span><span class="nt">roiplus    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;roi_5</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0&#39;</span>
<span class="w">    </span><span class="nt">rrhigh     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rr_1_10</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">1.2&#39;</span>
<span class="w">    </span><span class="nt">rrlow      </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rr_1_10</span><span class="nv"> </span><span class="s">&lt;=</span><span class="nv"> </span><span class="s">0.8&#39;</span>
<span class="w">    </span><span class="nt">rrover     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rr_1_10</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">1.0&#39;</span>
<span class="w">    </span><span class="nt">rrunder    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rr_1_10</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">1.0&#39;</span>
<span class="w">    </span><span class="nt">sep        </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rixc_1</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">rixo_1&#39;</span>
<span class="w">    </span><span class="nt">sepdoji    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;abs(sep)</span><span class="nv"> </span><span class="s">&lt;=</span><span class="nv"> </span><span class="s">15&#39;</span>
<span class="w">    </span><span class="nt">sephigh    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;abs(sep_1_1)</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">70&#39;</span>
<span class="w">    </span><span class="nt">seplow     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;abs(sep_1_1)</span><span class="nv"> </span><span class="s">&lt;=</span><span class="nv"> </span><span class="s">30&#39;</span>
<span class="w">    </span><span class="nt">trend      </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rrover</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">sephigh&#39;</span>
<span class="w">    </span><span class="nt">vmover     </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;vmratio</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">1&#39;</span>
<span class="w">    </span><span class="nt">vmunder    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;vmratio</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">1&#39;</span>
<span class="w">    </span><span class="nt">volatility </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;atr_10</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">close&#39;</span>
<span class="w">    </span><span class="nt">wr         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;hlrange</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">rmax_4&#39;</span>
</pre></div>
</div>
</div>
<p>In each of the tutorials, we experiment with different options in
<code class="docutils literal notranslate"><span class="pre">model.yml</span></code> to run AlphaPy. Here, we first apply univariate feature
selection and then run a random forest classifier with Recursive
Feature Elimination, including Cross-Validation (RFECV). When you
choose RFECV, the process takes much longer, so if you want to see
more logging, then increase the <code class="docutils literal notranslate"><span class="pre">verbosity</span></code> level in the <code class="docutils literal notranslate"><span class="pre">pipeline</span></code>
section.</p>
<p>Since stock prices are time series data, we apply the <code class="docutils literal notranslate"><span class="pre">runs_test</span></code>
function to twelve features in the <code class="docutils literal notranslate"><span class="pre">treatments</span></code> section. Treatments
are powerful because you can write any function to extrapolate new
features from existing ones. AlphaPy provides some of these functions
in the <code class="docutils literal notranslate"><span class="pre">alphapy.features</span></code> module, but it can also import external
functions as well.</p>
<p>Our target variable is <code class="docutils literal notranslate"><span class="pre">rrover</span></code>, the ratio of the 1-day range to
the 10-day average high/low range. If that ratio is greater than
or equal to 1.0, then the value of <code class="docutils literal notranslate"><span class="pre">rrover</span></code> is True. This is
what we are trying to predict.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><strong>model.yml</strong></span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">project</span><span class="p">:</span>
<span class="w">    </span><span class="nt">directory         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">    </span><span class="nt">file_extension    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">csv</span>
<span class="w">    </span><span class="nt">submission_file   </span><span class="p">:</span>
<span class="w">    </span><span class="nt">submit_probas     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="nt">data</span><span class="p">:</span>
<span class="w">    </span><span class="nt">drop              </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;date&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;tag&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;open&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;high&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;low&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;close&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;volume&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;adjclose&#39;</span><span class="p p-Indicator">,</span>
<span class="w">                         </span><span class="s">&#39;low[1]&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;high[1]&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;net&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;close[1]&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_5&#39;</span><span class="p p-Indicator">,</span>
<span class="w">                         </span><span class="s">&#39;rmin_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_8&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_10&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmin_18&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;pval&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mval&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;vma&#39;</span><span class="p p-Indicator">,</span>
<span class="w">                         </span><span class="s">&#39;rmax_2&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_5&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_6&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_7&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;rmax_10&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">features          </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*&#39;</span>
<span class="w">    </span><span class="nt">sampling          </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">method        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">under_random</span>
<span class="w">        </span><span class="nt">ratio         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">sentinel          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">    </span><span class="nt">separator         </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;,&#39;</span>
<span class="w">    </span><span class="nt">shuffle           </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">split             </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">    </span><span class="nt">target            </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rrover</span>
<span class="w">    </span><span class="nt">target_value      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">algorithms        </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;RF&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">balance_classes   </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">calibration       </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">type          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">isotonic</span>
<span class="w">    </span><span class="nt">cv_folds          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">estimators        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">501</span>
<span class="w">    </span><span class="nt">feature_selection </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">percentage    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">        </span><span class="nt">uni_grid      </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">25</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">score_func    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f_classif</span>
<span class="w">    </span><span class="nt">grid_search       </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">iterations    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">random        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">subsample     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">sampling_pct  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">    </span><span class="nt">pvalue_level      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">    </span><span class="nt">rfe               </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">step          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="nt">scoring_function  </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;roc_auc&#39;</span>
<span class="w">    </span><span class="nt">type              </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">classification</span>

<span class="nt">features</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clustering        </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">increment     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">maximum       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">        </span><span class="nt">minimum       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">counts            </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">encoding          </span><span class="p">:</span>
<span class="w">        </span><span class="nt">rounding      </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">type          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">factorize</span>
<span class="w">    </span><span class="nt">factors           </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">interactions      </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">poly_degree   </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">sampling_pct  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">isomap            </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">components    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">neighbors     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">logtransform      </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">numpy             </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">pca               </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">increment     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">maximum       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">        </span><span class="nt">minimum       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">whiten        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">scaling           </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">type          </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">standard</span>
<span class="w">    </span><span class="nt">scipy             </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">text              </span><span class="p">:</span>
<span class="w">        </span><span class="nt">ngrams        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">vectorize     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">tsne              </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">components    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">learning_rate </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000.0</span>
<span class="w">        </span><span class="nt">perplexity    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">    </span><span class="nt">variance          </span><span class="p">:</span>
<span class="w">        </span><span class="nt">option        </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">        </span><span class="nt">threshold     </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>

<span class="nt">treatments</span><span class="p">:</span>
<span class="w">    </span><span class="nt">doji              </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">hc                </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">hh                </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">hl                </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">ho                </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">rrhigh            </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">rrlow             </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">rrover            </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">rrunder           </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">sephigh           </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">seplow            </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">trend             </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;alphapy.features&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;runs_test&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;all&#39;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>

<span class="nt">pipeline</span><span class="p">:</span>
<span class="w">    </span><span class="nt">number_jobs       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">    </span><span class="nt">seed              </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10231</span>
<span class="w">    </span><span class="nt">verbosity         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="nt">plots</span><span class="p">:</span>
<span class="w">    </span><span class="nt">calibration       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">confusion_matrix  </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">importances       </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">learning_curve    </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">roc_curve         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="nt">xgboost</span><span class="p">:</span>
<span class="w">    </span><span class="nt">stopping_rounds   </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
</div>
<p><strong>Step 2</strong>: Now, let’s run MarketFlow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mflow</span> <span class="o">--</span><span class="n">pdate</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span>
</pre></div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">mflow</span></code> runs, you will see the progress of the workflow,
and the logging output is saved in <code class="docutils literal notranslate"><span class="pre">market_flow.log</span></code>. When the
workflow completes, your project structure will look like this,
with a different datestamp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Trading Model
├── market_flow.log
├── config
    ├── algos.yml
    ├── market.yml
    ├── model.yml
└── data
└── input
    ├── test_20170420.csv
    ├── test.csv
    ├── train_20170420.csv
    ├── train.csv
└── model
    ├── feature_map_20170420.pkl
    ├── model_20170420.pkl
└── output
    ├── predictions_20170420.csv
    ├── probabilities_20170420.csv
    ├── rankings_20170420.csv
└── plots
    ├── calibration_test.png
    ├── calibration_train.png
    ├── confusion_test_RF.png
    ├── confusion_train_RF.png
    ├── feature_importance_train_RF.png
    ├── learning_curve_train_RF.png
    ├── roc_curve_test.png
    ├── roc_curve_train.png
</pre></div>
</div>
<p>Let’s look at the results in the <code class="docutils literal notranslate"><span class="pre">plots</span></code> directory. Since our
scoring function was <code class="docutils literal notranslate"><span class="pre">roc_auc</span></code>, we examine the ROC Curve first.
The AUC is approximately 0.61, which is not very high but in the
context of the stock market, we may still be able to derive
some predictive power. Further, we are running the model on a
relatively small sample of stocks, as denoted by the jittery
line of the ROC Curve.</p>
<a class="reference internal image-reference" href="../_images/rrover_roc_curve.png"><img alt="ROC Curve" class="align-center" src="../_images/rrover_roc_curve.png" style="width: 100%;" /></a>
<p>We can benefit from more samples, as the learning curve shows
that the training and cross-validation lines have yet to converge.</p>
<a class="reference internal image-reference" href="../_images/rrover_learning_curve.png"><img alt="ROC Curve" class="align-center" src="../_images/rrover_learning_curve.png" style="width: 100%;" /></a>
<p>The good news is that even with a relatively small number of
testing points, the Reliability Curve slopes upward from left
to right, with the dotted line denoting a perfect classifier.</p>
<a class="reference internal image-reference" href="../_images/rrover_calibration.png"><img alt="ROC Curve" class="align-center" src="../_images/rrover_calibration.png" style="width: 100%;" /></a>
<p>To get better accuracy, we can raise our threshold to find the
best candidates, since they are ranked by probability, but this
also means limiting our pool of stocks. Let’s take a closer
look at the rankings file.</p>
<p><strong>Step 3</strong>: From the command line, enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
<p><strong>Step 4</strong>: Click on the notebook named:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="n">Trading</span> <span class="n">Model</span><span class="o">.</span><span class="n">ipynb</span>
</pre></div>
</div>
<p><strong>Step 5</strong>: Run the commands in the notebook, making sure that
when you read in the rankings file, change the date to match
the result from the <code class="docutils literal notranslate"><span class="pre">ls</span></code> command.</p>
<p><code class="docutils literal notranslate"><span class="pre">Conclusion</span></code> We can predict large-range days with some confidence,
but only at a higher probability threshold. This is important for
choosing the correct system on any given day. We can achieve
better results with more data, so we recommend expanding the
stock universe, e.g., a group with at least 100 members going
five years back.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="kaggle.html" class="btn btn-neutral float-left" title="Kaggle Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ncaab.html" class="btn btn-neutral float-right" title="NCAA Basketball Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ScottFree Analytics LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>